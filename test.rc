#[link(name = "capnproto-rust-test", vers = "0.0", author = "dwrensha")];

#[crate_type = "bin"];

pub mod common;
pub mod endian;
pub mod layout;
pub mod arena;
pub mod message;
pub mod serialize;

pub mod list;


// TODO figure out how to compile capnproto-rust separately as a library.


fn main() {
    use message::*;
    use layout::*;

    let message = MessageBuilder::new_default();

    let size = StructSize{data : 0,
                          pointers : 1,
                          preferredListEncoding: FOUR_BYTES, // ?
                         };

    message.initRoot(size);

    let outStream = std::io::stdout();

    serialize::writeMessage(outStream, message)

}